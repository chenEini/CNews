{"ast":null,"code":"import _slicedToArray from\"/Users/cheneini/Documents/chen-degree/cloud/cnews/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{ArticlesService}from'../../services/articles.service';import Article from'./Article';import{CategoriesService}from\"../../services/category.service\";function ArticleList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),categorySearch=_useState6[0],setCategorySearch=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),startDateSearch=_useState8[0],setStartDateSearch=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),endDateSearch=_useState10[0],setEndDateSearch=_useState10[1];var getArticles=function getArticles(category,startDate,endDate){ArticlesService.getArticles(category,startDate,endDate).then(function(data){setArticles(data);}).catch(function(err){console.log(err);});};useEffect(function(){getArticles();},[]);useEffect(function(){CategoriesService.getCategories().then(function(data){setCategories(data);}).catch(function(err){console.log(err);});},[categories.length]);var onCategoryChange=function onCategoryChange(event){setCategorySearch(event.target.value);};var search=function search(event){var isClear=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var startDate='';var endDate='';if(isClear){getArticles('','','');return;}if(startDateSearch){startDate=new Date(startDateSearch);}if(endDateSearch){endDate=new Date(endDateSearch);endDate.setHours(23,59,59,999);}getArticles(categorySearch,startDate,endDate);};var clearSearch=function clearSearch(){setCategorySearch('');setStartDateSearch(null);setEndDateSearch(null);search(null,true);};return/*#__PURE__*/React.createElement(\"div\",{className:\"article-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"category-search\"},/*#__PURE__*/React.createElement(\"select\",{value:categorySearch,id:\"category\",onChange:onCategoryChange},/*#__PURE__*/React.createElement(\"option\",{value:''},\"All\"),categories.map(function(c,index){return/*#__PURE__*/React.createElement(\"option\",{value:c.id,key:index},c.name);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"dates-search\"},/*#__PURE__*/React.createElement(\"input\",{id:\"startDate\",type:\"date\",placeholder:\"Enter start date\",onChange:function onChange(e){return setStartDateSearch(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{id:\"endDate\",type:\"date\",placeholder:\"Enter end date\",onChange:function onChange(e){return setEndDateSearch(e.target.value);}})),/*#__PURE__*/React.createElement(\"button\",{onClick:search},\"Search\"),/*#__PURE__*/React.createElement(\"button\",{onClick:clearSearch},\"Clear\")),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},articles.map(function(a,index){return/*#__PURE__*/React.createElement(Article,{key:index,article:a});})));}export default ArticleList;","map":{"version":3,"sources":["/Users/cheneini/Documents/chen-degree/cloud/cnews/server/client/src/components/article/ArticleList.js"],"names":["React","useEffect","useState","ArticlesService","Article","CategoriesService","ArticleList","articles","setArticles","categories","setCategories","categorySearch","setCategorySearch","startDateSearch","setStartDateSearch","endDateSearch","setEndDateSearch","getArticles","category","startDate","endDate","then","data","catch","err","console","log","getCategories","length","onCategoryChange","event","target","value","search","isClear","Date","setHours","clearSearch","map","c","index","id","name","e","a"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {ArticlesService} from '../../services/articles.service';\nimport Article from './Article'\nimport {CategoriesService} from \"../../services/category.service\";\n\nfunction ArticleList() {\n    const [articles, setArticles] = useState([]);\n    const [categories, setCategories] = useState([]);\n    const [categorySearch, setCategorySearch] = useState('');\n\tconst [startDateSearch, setStartDateSearch] = useState(null);\n\tconst [endDateSearch, setEndDateSearch] = useState(null);\n\n\tconst getArticles = (category, startDate, endDate) => {\n\t\tArticlesService.getArticles(category, startDate, endDate)\n\t\t\t.then(data => {\n\t\t\t\tsetArticles(data)\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t});\n\t};\n\n    useEffect(() => {\n    \tgetArticles();\n    }, []);\n\n    useEffect(() => {\n\t    CategoriesService.getCategories()\n\t\t    .then(data => {\n\t\t\t    setCategories(data)\n\t\t    })\n\t\t    .catch(err => {\n\t\t\t    console.log(err)\n\t\t    });\n    }, [categories.length]);\n\n    const onCategoryChange = (event) => {\n    \tsetCategorySearch(event.target.value);\n    };\n\n    const search = (event, isClear = false) => {\n\t    let startDate = '';\n\t    let endDate = '';\n\n\t    if (isClear) {\n\t    \tgetArticles('', '', '');\n\t    \treturn;\n\t    }\n\n    \tif (startDateSearch) {\n\t        startDate = new Date(startDateSearch);\n\t    }\n\n\t    if (endDateSearch) {\n\t        endDate = new Date(endDateSearch);\n\t        endDate.setHours(23, 59, 59, 999);\n\t    }\n\n\t    getArticles(categorySearch, startDate, endDate);\n    };\n\n    const clearSearch = () => {\n        setCategorySearch('');\n        setStartDateSearch(null);\n        setEndDateSearch(null);\n\n        search(null, true)\n    };\n\n    return (\n        <div className=\"article-list\">\n\t        <div className=\"search\">\n\t\t\t\t<div className=\"category-search\">\n\t\t\t\t\t<select value={categorySearch} id=\"category\" onChange={onCategoryChange}>\n\t\t\t\t\t\t<option value={''}>All</option>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcategories.map((c, index) => <option value={c.id} key={index} >{c.name}</option>)\n\t\t\t\t\t\t}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t        <div className=\"dates-search\">\n\t\t\t        <input id=\"startDate\" type=\"date\" placeholder=\"Enter start date\" onChange={e => setStartDateSearch(e.target.value)}/>\n\t\t\t        <input id=\"endDate\" type=\"date\" placeholder=\"Enter end date\" onChange={e => setEndDateSearch(e.target.value)}/>\n\t\t        </div>\n\t\t        <button onClick={search}>Search</button>\n\t\t        <button onClick={clearSearch}>Clear</button>\n\t        </div>\n\n\t        <div className=\"content\">\n\t            {\n\t                articles.map((a, index) => (<Article key={index} article={a}/>))\n\t            }\n\t        </div>\n        </div>\n    )\n}\n\nexport default ArticleList;\n"]},"metadata":{},"sourceType":"module"}