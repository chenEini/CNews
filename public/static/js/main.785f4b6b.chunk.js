(this["webpackJsonpcnews-client"]=this["webpackJsonpcnews-client"]||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(19),r=n.n(l),o=(n(27),n(7)),i=n(1),u=n(2),s=n(12),m=n(13),f=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,null,[{key:"getArticles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&(t=t.getTime()),n&&(n=n.getTime()),fetch("".concat(this.articlesUrl,"?category=").concat(e,"&startDate=").concat(t,"&endDate=").concat(n)).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}},{key:"getArticle",value:function(e){return fetch("".concat(this.articlesUrl,"/").concat(e)).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}},{key:"addArticle",value:function(e,t,n){var a={title:e,content:t,category:n};return fetch(this.articlesUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}},{key:"getArticleDate",value:function(e){return fetch("".concat(this.lambdaUrl,"?articleDate=").concat(e.created_at)).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}}]),e}();f.articlesUrl="".concat(window.location.origin,"/api/articles"),f.lambdaUrl="https://3t0d39gku3.execute-api.us-east-1.amazonaws.com/production/dateformatting";var g=function(e){var t=e.article,n=Object(a.useState)(""),l=Object(u.a)(n,2),r=l[0],i=l[1];return Object(a.useEffect)((function(){f.getArticleDate(t).then((function(e){i(e)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("header",null,c.a.createElement(o.b,{to:"/articles/".concat(t.id)},t.title," | ",t.categoryName)),c.a.createElement("footer",null,r?"".concat(r," |"):""," ",t.views," views"))},h=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,null,[{key:"getCategories",value:function(){return fetch(this.categoriesUrl).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}},{key:"addCategory",value:function(e){return fetch(this.categoriesUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}}]),e}();h.categoriesUrl="".concat(window.location.origin,"/api/categories");var d=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)([]),o=Object(u.a)(r,2),i=o[0],s=o[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),E=d[0],v=d[1],b=Object(a.useState)(null),j=Object(u.a)(b,2),O=j[0],p=j[1],y=Object(a.useState)(null),w=Object(u.a)(y,2),C=w[0],S=w[1],k=function(e,t,n){f.getArticles(e,t,n).then((function(e){l(e)})).catch((function(e){console.log(e)}))};Object(a.useEffect)((function(){k()}),[]),Object(a.useEffect)((function(){h.getCategories().then((function(e){s(e)})).catch((function(e){console.log(e)}))}),[i.length]);var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",a="";t?k("","",""):(O&&(n=new Date(O)),C&&(a=new Date(C)).setHours(23,59,59,999),k(E,n,a))};return c.a.createElement("div",{className:"article-list"},c.a.createElement("div",{className:"search"},c.a.createElement("div",{className:"category-search"},c.a.createElement("select",{value:E,id:"category",onChange:function(e){v(e.target.value)}},c.a.createElement("option",{value:""},"All"),i.map((function(e,t){return c.a.createElement("option",{value:e.id,key:t},e.name)})))),c.a.createElement("div",{className:"dates-search"},c.a.createElement("input",{id:"startDate",type:"date",placeholder:"Enter start date",onChange:function(e){return p(e.target.value)}}),c.a.createElement("input",{id:"endDate",type:"date",placeholder:"Enter end date",onChange:function(e){return S(e.target.value)}})),c.a.createElement("button",{onClick:A},"Search"),c.a.createElement("button",{onClick:function(){v(""),p(null),S(null),A(null,!0)}},"Clear")),c.a.createElement("div",{className:"content"},n.map((function(e,t){return c.a.createElement(g,{key:t,article:e})}))))},E=n(21);var v=function(e){var t=e.category;return c.a.createElement("div",null,t.name)};var b=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){h.getCategories().then((function(e){l(e)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("span",null,"categories list:")),c.a.createElement("br",null),c.a.createElement("div",{className:"category-list"},n.map((function(e,t){return c.a.createElement(v,{key:t,category:e})}))),c.a.createElement("div",null,c.a.createElement("input",{value:i,onChange:function(e){s(e.target.value)}}),c.a.createElement("button",{onClick:function(){i&&h.addCategory({name:i}).then((function(e){l([].concat(Object(E.a)(n),[e])),s("")})).catch(console.log)}},"Add category")))};var j=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),i=o[0],s=o[1],m=Object(a.useState)(""),g=Object(u.a)(m,2),d=g[0],E=g[1],v=Object(a.useState)(-1),b=Object(u.a)(v,2),j=b[0],O=b[1];return Object(a.useEffect)((function(){h.getCategories().then((function(e){l(e)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("div",null,"Add Article:"),c.a.createElement("div",null,c.a.createElement("input",{value:i,onChange:function(e){s(e.target.value)},name:"title",placeholder:"Enter title"}),c.a.createElement("textarea",{value:d,onChange:function(e){E(e.target.value)},name:"content",placeholder:"Enter content"}),c.a.createElement("select",{value:j,onChange:function(e){O(e.target.value)},name:"category"},c.a.createElement("option",{disabled:!0,value:-1},"Choose category"),n.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})))),c.a.createElement("button",{onClick:function(){i&&d&&j&&(f.addArticle(i,d,j).then((function(){console.log("New article was added")})).catch(console.log),s(""),E(""),O(-1))}},"Add"))};var O=function(){return c.a.createElement("div",null,c.a.createElement("ul",{style:{marginLeft:"20px"}},c.a.createElement("li",null,c.a.createElement(o.b,{to:"/management/articles"},"Manage Articles")),c.a.createElement("li",null,c.a.createElement(o.b,{to:"/management/categories"},"Manage Categories"))),c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/management/articles"},c.a.createElement(j,null)),c.a.createElement(i.a,{path:"/management/categories"},c.a.createElement(b,null))))};var p=function(){var e=Object(i.f)().articleId,t=Object(a.useState)(null),n=Object(u.a)(t,2),l=n[0],r=n[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),m=s[0],g=s[1];return Object(a.useEffect)((function(){f.getArticle(e).then((function(e){r(e)})).catch(console.log)}),[e]),Object(a.useEffect)((function(){l&&f.getArticleDate(l).then((function(e){return g(e)})).catch((function(e){console.log(e)}))}),[l]),l?c.a.createElement("div",null,c.a.createElement("header",null,l.title," | ",l.categoryName),c.a.createElement("article",null,l.content),c.a.createElement("footer",null,m?"".concat(m," |"):""," ",l.views," views")):null};function y(){return c.a.createElement(o.a,null,c.a.createElement("div",null,c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(o.b,{to:"/articles"},"Articles")),c.a.createElement("li",null,c.a.createElement(o.b,{to:"/management"},"Management Login")))),c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/articles/:articleId"},c.a.createElement(p,null)),c.a.createElement(i.a,{path:"/articles"},c.a.createElement(d,null)),c.a.createElement(i.a,{path:"/management"},c.a.createElement(O,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.785f4b6b.chunk.js.map